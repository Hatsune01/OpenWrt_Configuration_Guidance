Tags: #Sysadmin   
Categories: 

---

## 1. Use Certbot (HTTP challenge)

> Adjust the command to the corresponding package manager and HTTP server.

```bash
apt update
apt install -y certbot python-certbot-apache
# If python-certbot-apache cannot be found, try python3-certbot-apache instead.

certbot --apache -d example.net
```
This method automatically installs the certificates generated by adjustments to the HTTP server config files.
 
---

## 2. Use acme-dns-certbot (DNS validation)

Use this method when ports 80 and 443 aren't available. The ACME server does HTTP challenges over ports 80 and 443, so in this case, HTTP challenges won't work.

```bash
apt install -y certbot
```

> Check if `python-requests` library is installed before proceeding to the next step.

```bash
curl -o /etc/letsencrypt/acme-dns-auth.py https://raw.githubusercontent.com/joohoi/acme-dns-certbot-joohoi/master/acme-dns-auth.py
chmod u+x /etc/letsencrypt/acme-dns-auth.py
```

Add a `3` to the end of the first line of `acme-dns-auth.py`, making it look like this:
```python
#!/usr/bin/env python3
```

```bash
certbot certonly --manual --manual-auth-hook /etc/letsencrypt/acme-dns-auth.py --preferred-challenges dns --debug-challenges -d your-domain
```
Add the CNAME records per the instructions given by Certbot, and the SSL certificates should be good to go.

---

## Credits

[Jay's video on using Certbot to get an SSL certificate](https://youtu.be/WPPBO-QpiJ0)

[Apache SSL configurations from Apache official docs](https://httpd.apache.org/docs/2.4/ssl/ssl_howto.html)

[How to get an SSL certificate using DNS validation with acme-dns-certbot](https://www.digitalocean.com/community/tutorials/how-to-acquire-a-let-s-encrypt-certificate-using-dns-validation-with-acme-dns-certbot-on-ubuntu-18-04)